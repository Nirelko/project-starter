import {{properCase name}} from './{{name}}.model';
import empty from 'http-reject-empty';
import _ from 'lodash';

// Get list of {{plur name}}
export function index () {
  return {{properCase name}}.find({});
}

// Get a single {{name}}
export function show ({params: {id}}) {
  return {{properCase name}}.findById(id)
    .then(empty);
}

// Creates a new {{name}}
export function create ({body}, res) {
  const data = _.pick(body, ['name']);

  return {{properCase name}}.create(data)
    .then(empty)
    .then({{name}} => {
      res.status(201);

      return {{name}};
    });
}

// Update a {{name}}
export function update ({params: {id}, body}) {
  const data = _.pick(body, ['name']);

  return {{properCase name}}.findById(id)
    .then(empty)
    .then({{name}} => {{name}}.set(data).save())
    .then(_.noop);
}

// Deletes a {{name}}
export function destroy ({params: id}) {
  return {{properCase name}}.findOneAndRemove({_id: id})
    .then(empty)
    .then(_.noop);
}